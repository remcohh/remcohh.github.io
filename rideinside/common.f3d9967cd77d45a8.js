"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8592],{3620:(f,c,n)=>{n.r(c),n.d(c,{startFocusVisible:()=>u});const a="ion-focused",v=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],u=i=>{let l=[],t=!0;const o=i?i.shadowRoot:document,s=i||document.body,e=w=>{l.forEach(h=>h.classList.remove(a)),w.forEach(h=>h.classList.add(a)),l=w},g=()=>{t=!1,e([])},p=w=>{t=v.includes(w.key),t||e([])},d=w=>{if(t&&w.composedPath){const h=w.composedPath().filter(m=>!!m.classList&&m.classList.contains("ion-focusable"));e(h)}},_=()=>{o.activeElement===s&&e([])};return o.addEventListener("keydown",p),o.addEventListener("focusin",d),o.addEventListener("focusout",_),o.addEventListener("touchstart",g),o.addEventListener("mousedown",g),{destroy:()=>{o.removeEventListener("keydown",p),o.removeEventListener("focusin",d),o.removeEventListener("focusout",_),o.removeEventListener("touchstart",g),o.removeEventListener("mousedown",g)},setFocus:e}}},8107:(f,c,n)=>{n.d(c,{a:()=>a,b:()=>o,c:()=>r,d:()=>i,e:()=>s,f:()=>t,g:()=>l,h:()=>u,i:()=>v});const a="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Arrow Down</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 268l144 144 144-144M256 392V100' class='ionicon-fill-none'/></svg>",r="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Back</title><path d='M368 64L144 256l224 192V64z'/></svg>",v="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Down</title><path d='M64 144l192 224 192-224H64z'/></svg>",u="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Up</title><path d='M448 368L256 144 64 368h384z'/></svg>",i="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Back</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",l="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Down</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",t="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",s="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Ellipsis Horizontal</title><circle cx='256' cy='256' r='48'/><circle cx='416' cy='256' r='48'/><circle cx='96' cy='256' r='48'/></svg>"},9900:(f,c,n)=>{n.d(c,{V:()=>u});var a=n(4762),r=n(6079),v=n(8621);let u=(()=>{class i{constructor(t){this.storage=t,this._storage=null,this.init()}init(){return(0,a.mG)(this,void 0,void 0,function*(){const t=yield this.storage.create();this._storage=t})}set(t,o){var s;null===(s=this._storage)||void 0===s||s.set(t,o)}get(t){var o;return null===(o=this._storage)||void 0===o?void 0:o.get(t)}}return i.\u0275fac=function(t){return new(t||i)(r.LFG(v.K))},i.\u0275prov=r.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},3982:(f,c,n)=>{n.d(c,{R:()=>l});var a=n(4762),r=n(6079),v=n(8621),u=n(9949),i=n(4522);let l=(()=>{class t{constructor(s,e,g){this.storage=s,this.router=e,this.http=g}getAccessToken(s){return(0,a.mG)(this,void 0,void 0,function*(){this.http.post("https://www.strava.com/api/v3/oauth/token",Object.assign({client_id:4456,client_secret:"f148ef280fb450832f95bfef9abbb26f5bce02cb"},s)).subscribe({next:e=>{console.log("Response",e),this.storage.set("access_token",e.access_token),this.storage.set("refresh_token",e.refresh_token),this.storage.set("expires_at",e.expires_at),this.router.navigate(["/","ride"])},error:e=>{console.warn(e.message||e),this.router.navigate(["/","settings"])}})})}uploadActivity(s){return(0,a.mG)(this,void 0,void 0,function*(){const e=new Blob([s],{type:"text/plain"}),p={Authorization:`Bearer ${yield this.storage.get("access_token")}`},d=new FormData;d.append("activity_type","virtualride"),d.append("name","Virtual ride"),d.append("data_type","tcx"),d.append("file",e,"ride.tcx");const _=yield fetch("https://www.strava.com/api/v3/uploads",{method:"POST",body:d,headers:p});console.log("response",_)})}tokenValid(){return(0,a.mG)(this,void 0,void 0,function*(){return(yield this.storage.get("expires_at"))-Math.round(+new Date/1e3)>60})}}return t.\u0275fac=function(s){return new(s||t)(r.LFG(v.K),r.LFG(u.F0),r.LFG(i.eN))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);